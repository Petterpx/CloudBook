# Kotlin | å…³äºåç¨‹å¼‚å¸¸å¤„ç†ï¼Œä½ æƒ³çŸ¥é“çš„éƒ½åœ¨è¿™é‡Œ

![Kotlinç¬”è®°ç›¸å…³æ’å›¾çš„å‰¯æœ¬2](https://tva1.sinaimg.cn/large/e6c9d24ely1h51nsgu6rqj212c0hmaav.jpg)

## å¼•è¨€

å…³äºåç¨‹çš„å¼‚å¸¸å¤„ç†ï¼Œä¸€ç›´ä»¥æ¥éƒ½ä¸æ˜¯ä¸€ä¸ªç®€å•é—®é¢˜ã€‚å› ä¸ºæ¶‰åŠåˆ°äº†å¾ˆå¤šæ–¹é¢ï¼ŒåŒ…æ‹¬ **å¼‚å¸¸çš„ä¼ é€’** ï¼Œ**ç»“æ„åŒ–å¹¶å‘ä¸‹çš„å¼‚å¸¸å¤„ç†** ,**å¼‚å¸¸çš„ä¼ æ’­æ–¹å¼** ,**ä¸åŒçš„Job** ç­‰ï¼Œæ‰€ä»¥å¸¸å¸¸è®©å¾ˆå¤š(ç‰¹åˆ«æ˜¯åˆšä½¿ç”¨åç¨‹çš„,ä¹Ÿä¸ä¹è€æ‰‹)åŒå­¦æ‘¸ä¸ç€å¤´è„‘ã€‚

å¸¸è§æœ‰å¦‚ä¸‹ä¸¤ç§å¤„ç†æ–¹å¼ï¼š

- `try catch`
- `CoroutineExceptionHandler`

ä½†è¿™ä¸¤ç§æ–¹å¼(ç‰¹åˆ«æ˜¯ç¬¬äºŒç§)åˆ°åº•è¯¥ä»€ä¹ˆæ—¶å€™ç”¨ï¼Œç”¨åœ¨å“ªé‡Œï¼Œå´æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Ÿ

æ¯”å¦‚è™½ç„¶çŸ¥é“ `CoroutineExceptionHandler` ï¼Œä½†ä¸ºä»€ä¹ˆå¢åŠ äº†å´è¿˜æ˜¯å´©æºƒï¼Ÿåˆ°åº•åº”è¯¥åŠ åœ¨å“ªé‡Œ? å°è¯•åŠå¤©å‘ç°æ— è§£ï¼Œæœ€ç»ˆåˆåªèƒ½ç›´æ¥ `try catch` ï¼Œç²—æš´å¹¶æœ‰æ•ˆï¼Œæœ€ç»ˆé‡åˆ°æ­¤ç±»é—®é¢˜ï¼Œç›´æ¥ä¸‹æ„è¯† `try` ä½ã€‚

> `try catch` è™½ç„¶ç›´æ¥ï¼Œä¸€å®šç¨‹åº¦ä¸Šä¹Ÿå¸®æˆ‘ä»¬è§„é¿äº†å¾ˆå¤šä½¿ç”¨æ–¹é¢çš„é—®é¢˜ï¼Œä½†åŒæ—¶ä¹ŸåŸ‹ä¸‹äº†å¾ˆå¤šå‘ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰åç¨‹çš„å¼‚å¸¸éƒ½å¯ä»¥ `try` ä½(å–å†³äºä½¿ç”¨ä½ç½®)ï¼Œå…¶ä¹Ÿä¸æ˜¯ä»»ä½•åœºæ™¯çš„æœ€ä¼˜è§£ã€‚

**é‰´äºæ­¤ï¼Œæœ¬ç¯‡å°†ä»å¤´åˆ°å°¾ï¼Œå¸®åŠ©ä½ ç†æ¸…ä»¥ä¸‹é—®é¢˜ï¼š**

- ä»€ä¹ˆæ˜¯ç»“æ„åŒ–å¹¶å‘?
- åç¨‹çš„å¼‚å¸¸ä¼ æ’­æµç¨‹ä¸å½¢å¼
- åç¨‹çš„å¼‚å¸¸å¤„ç†æ–¹å¼
- ä¸ºä»€ä¹ˆæœ‰äº›å¼‚å¸¸å¤„ç†äº†å´è¿˜æ˜¯å´©äº†
- [SupervisorJob](https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-supervisor-job.html) çš„ä½¿ç”¨åœºæ™¯
- `supervisorScope` ä¸ `coroutineScope`
- å¼‚å¸¸å¤„ç†æ–¹å¼çš„åœºæ™¯æ¨è

æœ¬æ–‡å°½å¯èƒ½ä¼šç”¨å¤§ç™½è¯ä¸ä½ åˆ†äº«ç†è§£ï¼Œå¦‚æœ‰é—æ¼æˆ–ç†è§£ä¸å½“ï¼Œä¹Ÿæ¬¢è¿è¯„è®ºåŒºåé¦ˆã€‚

å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼

---

## ç»“æ„åŒ–å¹¶å‘

åœ¨æœ€å¼€å§‹å‰ï¼Œæˆ‘ä»¬å…ˆææ¸…æ¥šä»€ä¹ˆæ˜¯ **ç»“æ„åŒ–å¹¶å‘**ï¼Œè¿™å¯¹æˆ‘ä»¬ç†è§£åç¨‹å¼‚å¸¸çš„ä¼ é€’å°†éå¸¸æœ‰å¸®åŠ©ã€‚

è®©æˆ‘ä»¬å…ˆå°†æ€è·¯è½¬ä¸ºæ—¥å¸¸ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæ¯”å¦‚åœ¨æŸæŸä¸šåŠ¡ä¸­ï¼Œå¯èƒ½å­˜åœ¨å¥½å‡ ä¸ªéœ€è¦åŒæ—¶å¤„ç†çš„é€»è¾‘ï¼Œæ¯”å¦‚åŒæ—¶è¯·æ±‚ä¸¤ä¸ªç½‘ç»œæ¥å£ï¼ŒåŒæ—¶æ“ä½œä¸¤ä¸ªå­ä»»åŠ¡ç­‰ã€‚æˆ‘ä»¬æš‚ä¸”ç§°ä¸Šè¿°å­¦æœ¯åŒ–æ¦‚å¿µä¸º **å¤šä¸ªå¹¶å‘æ“ä½œ**ã€‚

è€Œæ¯ä¸ªå¹¶å‘æ“ä½œå…¶å®éƒ½æ˜¯åœ¨å¤„ç†ä¸€ä¸ªå•ç‹¬çš„ä»»åŠ¡ï¼Œè¿™ä¸ª **ä»»åŠ¡** ä¸­ï¼Œå¯èƒ½è¿˜å­˜åœ¨ **å­ä»»åŠ¡** ; åŒæ ·å¯¹äºè¿™ä¸ªå­ä»»åŠ¡æ¥è¯´ï¼Œå®ƒåˆæ˜¯å…¶çˆ¶ä»»åŠ¡çš„å­å•å…ƒã€‚æ¯ä¸ªä»»åŠ¡éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œå­ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸä¼šç»§æ‰¿çˆ¶ä»»åŠ¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ¯”å¦‚å¦‚æœçˆ¶ä»»åŠ¡å…³é—­ï¼Œå­ä»»åŠ¡ä¹Ÿä¼šè¢«å–æ¶ˆã€‚è€Œå¦‚æœæ»¡è¶³è¿™æ ·ç‰¹æ€§ï¼Œæˆ‘ä»¬å°±ç§°å…¶å°±æ˜¯ **ç»“æ„åŒ–å¹¶å‘**ã€‚

åœ¨åç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„ `CoroutineScope`ï¼Œæ­£æ˜¯åŸºäºè¿™æ ·çš„ç‰¹æ€§ï¼Œå³å…¶ä¹Ÿæœ‰è‡ªå·±çš„ä½œç”¨åŸŸä¸å±‚çº§æ¦‚å¿µã€‚

æ¯”å¦‚å½“æˆ‘ä»¬æ¯æ¬¡è°ƒç”¨å…¶æ‰©å±•æ–¹æ³• `launch()` æ—¶ï¼Œè¿™ä¸ªå†…éƒ¨åˆæ˜¯ä¸€ä¸ªæ–°çš„åç¨‹ä½œç”¨åŸŸ,æ–°çš„ä½œç”¨åŸŸåˆä¼šä¸çˆ¶åç¨‹ä¿æŒç€å±‚çº§å…³ç³»ï¼Œå½“æˆ‘ä»¬ å–æ¶ˆ `CoroutineScope` æ—¶ï¼Œå…¶æ‰€æœ‰å­åç¨‹ä¹Ÿéƒ½ä¼šè¢«å…³é—­ã€‚

å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼š

```kotlin
val scope = CoroutineScope(Job())
val jobA = scope.launch(CoroutineName("A")) {
   val jobChildA = launch(CoroutineName("child-A")) {
        delay(1000)
        println("xxx")
   }
  	// jobChildA.cancel()
}
val jobB = scope.launch(CoroutineName("B")) {
  			 delay(500)
        println("xxx")
}
// scope.cancel()
```

æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º `scope` çš„ä½œç”¨åŸŸ, å…¶ä¸­æœ‰ä¸¤ä¸ªå­åç¨‹ jobA,Bï¼ŒåŒæ—¶ jobA åˆæœ‰ä¸€ä¸ªå­åç¨‹ jobChildAã€‚

å¦‚æœæˆ‘ä»¬è¦å–æ¶ˆjobBï¼Œå¹¶ä¸ä¼šå½±å“jobAï¼Œå…¶ä¾ç„¶ä¼šç»§ç»­æ‰§è¡Œ;

ä½†å¦‚æœæˆ‘ä»¬è¦å–æ¶ˆæ•´ä¸ªä½œç”¨åŸŸæ—¶ `scope.cancel()`,jobA,jobBéƒ½ä¼šè¢«å–æ¶ˆï¼Œç›¸åº”jobAè¢«å–æ¶ˆæ—¶, å› ä¸ºå…¶ä¹Ÿæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥ jobChildA ä¹Ÿä¼šè¢«å–æ¶ˆï¼Œä»¥æ­¤ç±»æ¨ã€‚è€Œè¿™å°±æ˜¯åç¨‹çš„ **ç»“æ„åŒ–å¹¶å‘ç‰¹æ€§**ã€‚

---

## å¼‚å¸¸ä¼ æ’­æµç¨‹

é»˜è®¤æƒ…å†µä¸‹ï¼Œä»»æ„ä¸€ä¸ªåç¨‹å‘ç”Ÿå¼‚å¸¸æ—¶éƒ½ä¼šå½±å“åˆ°æ•´ä¸ªåç¨‹æ ‘ï¼Œè€Œå¼‚å¸¸çš„ä¼ é€’é€šå¸¸æ˜¯åŒå‘çš„ï¼Œä¹Ÿå³åç¨‹ä¼šå‘å­åç¨‹ä¸çˆ¶åç¨‹å…±åŒä¼ é€’ï¼Œå¦‚ä¸‹æ–¹æ‰€ç¤ºï¼š

![åç¨‹ä¸­çš„å¼‚å¸¸ä¼šé€šè¿‡åç¨‹çš„å±‚çº§ä¸æ–­ä¼ é€’](https://tva1.sinaimg.cn/large/e6c9d24ely1h4tzp0y93ag20hr0a0t91.gif)

æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š

- å…ˆ cancel å­åç¨‹
- å–æ¶ˆè‡ªå·±
- å°†å¼‚å¸¸ä¼ é€’ç»™çˆ¶åç¨‹
- (é‡å¤ä¸Šè¿°è¿‡ç¨‹,ç›´åˆ°æ ¹åç¨‹å…³é—­)

ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼š

![image-20220731232852045](https://tva1.sinaimg.cn/large/e6c9d24egy1h4qj0w9jlej210j0cmn08.jpg)

åœ¨ä¸Šå›¾ä¸­,æˆ‘ä»¬åˆ›å»ºäº† ä¸¤ä¸ªå­åç¨‹A,B,å¹¶åœ¨ Aä¸­ æŠ›å‡ºå¼‚å¸¸ï¼ŒæŸ¥çœ‹ç»“æœå¦‚å³å›¾æ‰€ç¤º, å½“å­åç¨‹Aå¼‚å¸¸è¢«ç»ˆæ­¢æ—¶,æˆ‘ä»¬çš„å­åç¨‹Bä¸çˆ¶åç¨‹éƒ½å—åˆ°å½±å“è¢«ç»ˆæ­¢ã€‚

> å½“ç„¶å¦‚æœä¸æƒ³åœ¨åç¨‹å¼‚å¸¸æ—¶ï¼ŒåŒçº§åˆ«å­åç¨‹æˆ–è€…çˆ¶åç¨‹å—åˆ°å½±å“ï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ `SupervisorJob` ,è¿™ä¸ªæˆ‘ä»¬æ”¾åœ¨ä¸‹é¢å†è°ˆã€‚

---



## å¼‚å¸¸ä¼ æ’­å½¢å¼

åœ¨åç¨‹ä¸­ï¼Œå¼‚å¸¸çš„ä¼ æ’­å½¢å¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è‡ªåŠ¨ä¼ æ’­( `launch` æˆ– `actor`)ï¼Œä¸€ç§æ˜¯å‘ç”¨æˆ·æš´æ¼è¯¥å¼‚å¸¸( `async` æˆ– `produce` ),è¿™ä¸¤ç§çš„åŒºåˆ«åœ¨äºï¼Œå‰è€…çš„å¼‚å¸¸ä¼ é€’è¿‡ç¨‹æ˜¯å±‚å±‚å‘ä¸Šä¼ é€’(å¦‚æœå¼‚å¸¸æ²¡æœ‰è¢«æ•è·)ï¼Œè€Œåè€…å°†ä¸ä¼šå‘ä¸Šä¼ é€’ï¼Œä¼šåœ¨è°ƒç”¨å¤„ç›´æ¥æš´æ¼ã€‚

> è®°ä½ä¸Šè¿°æ€è·¯å¯¹æˆ‘ä»¬å¤„ç†åç¨‹çš„å¼‚å¸¸å°†ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚
>



## å¼‚å¸¸å¤„ç†æ–¹å¼

### tryCatch

ä¸€èˆ¬è€Œè¨€, `tryCath` æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„å¤„ç†å¼‚å¸¸æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```kotlin
fun main() = runBlocking {
    launch {
        try {
            throw NullPointerException()
        } catch (e: Exception) {
            e.printStackTrace()
        }
    }
    println("å˜¿å®³å“ˆ")
}
```

å½“å¼‚å¸¸å‘ç”Ÿæ—¶,æˆ‘ä»¬åº•éƒ¨çš„è¾“å‡ºä¾ç„¶èƒ½æ­£å¸¸æ‰“å°ï¼Œè¿™ä¹Ÿä¸éš¾ç†è§£ï¼Œå°±åƒæˆ‘ä»¬åœ¨ `Android` æˆ–è€… `Java` ä¸­çš„ä½¿ç”¨ä¸€æ ·ã€‚ä½†æœ‰äº›æ—¶å€™è¿™ç§æ–¹å¼å¹¶ä¸ä¸€å®šèƒ½æœ‰æ•ˆ,æˆ‘ä»¬åœ¨ä¸‹é¢ä¸­ä¼šä¸“é—¨æåˆ°ã€‚ä½†å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ`tryCatch` ä¾ç„¶å¦‚ä¸‡é‡‘æ²¹ä¸€èˆ¬ï¼Œç¨³å®šä¸”å¯é ã€‚

---



### CoroutineExceptionHandler

å…¶æ˜¯ç”¨äºåœ¨åç¨‹ä¸­å…¨å±€æ•è·å¼‚å¸¸è¡Œä¸ºçš„æœ€åä¸€ç§æœºåˆ¶ï¼Œä½ å¯ä»¥ç†è§£ä¸º,ç±»ä¼¼ [`Thread.uncaughtExceptionHandler`](https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html#setUncaughtExceptionHandler(java.lang.Thread.UncaughtExceptionHandler)) ä¸€æ ·ã€‚

ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`CoroutineExceptionHandler` ä»…åœ¨æœªæ•è·çš„å¼‚å¸¸ä¸Šè°ƒç”¨ï¼Œä¹Ÿå³è¿™ä¸ªå¼‚å¸¸æ²¡æœ‰ä»»ä½•æ–¹å¼å¤„ç†æ—¶(æ¯”å¦‚åœ¨æºå¤´tryCatchäº†)ï¼Œç”±äºåç¨‹æ˜¯ç»“æ„åŒ–çš„ï¼Œå½“å­åç¨‹å‘ç”Ÿå¼‚å¸¸æ—¶ï¼Œå®ƒä¼šä¼˜å…ˆå°†å¼‚å¸¸å§”æ‰˜ç»™çˆ¶åç¨‹åŒºå¤„ç†ï¼Œä»¥æ­¤ç±»æ¨ `ç›´åˆ°æ ¹åç¨‹ä½œç”¨åŸŸæˆ–è€…é¡¶çº§åç¨‹` ã€‚å› æ­¤å…¶æ°¸è¿œä¸ä¼šä½¿ç”¨æˆ‘ä»¬å­åç¨‹ `CoroutineContext` ä¼ é€’çš„ `CoroutineExceptionHandler`(`SupervisorJob` é™¤å¤–),å¯¹äº `async` è¿™ç§,è€Œæ˜¯ç›´æ¥å‘ç”¨æˆ·ç›´æ¥æš´æ¼è¯¥å¼‚å¸¸,æ‰€ä»¥æˆ‘ä»¬åœ¨å…·ä½“è°ƒç”¨å¤„ç›´æ¥å¤„ç†å°±è¡Œã€‚

å¦‚ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š

```kotlin
 val scope = CoroutineScope(Job())
 scope.launch() {
     launch(CoroutineExceptionHandler { _, _ -> }) {
         delay(10)
         throw RuntimeException()
     }
 }
```

![image-20220806101448415](https://tva1.sinaimg.cn/large/e6c9d24ely1h4wtsjridij20uq07ygnt.jpg)

 ä¸éš¾å‘ç°å¼‚å¸¸äº†,åŸå› å°±æ˜¯æˆ‘ä»¬çš„ `CoroutineExceptionHandler` ä½ç½®ä¸æ˜¯æ ¹åç¨‹æˆ–è€… `CoroutineScope` åˆå§‹åŒ–æ—¶ã€‚

å¦‚æœæˆ‘ä»¬æ”¹æˆä¸‹è¿°æ–¹å¼ï¼Œå°±å¯ä»¥æ­£å¸¸å¤„ç†è¯¥å¼‚å¸¸:

```kotlin
// 1. åˆå§‹åŒ–scopeæ—¶
val scope = CoroutineScope(Job() + CoroutineExceptionHandler { _, _ -> })

// 2. æ ¹åç¨‹
scope.launch(CoroutineExceptionHandler { _, _ -> }) { }
```
---



### SupervisorJob 

supervisorJob æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„Job,å…¶ä¼šæ”¹å˜å¼‚å¸¸çš„ä¼ é€’æ–¹å¼ï¼Œå½“ä½¿ç”¨å®ƒæ—¶,æˆ‘ä»¬å­åç¨‹çš„å¤±è´¥ä¸ä¼šå½±å“åˆ°å…¶ä»–å­åç¨‹ä¸çˆ¶åç¨‹ï¼Œé€šä¿—ç‚¹ç†è§£å°±æ˜¯:å­åç¨‹ä¼šè‡ªå·±å¤„ç†å¼‚å¸¸ï¼Œå¹¶ä¸ä¼šå½±å“å…¶å…„å¼Ÿåç¨‹æˆ–è€…çˆ¶åç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:  

![img](https://tva1.sinaimg.cn/large/e6c9d24ely1h4zrlo96s4j20u00gwwfe.jpg)

ä¸¾ä¸ªç®€å•çš„ä¾‹å­:

```kotlin
val scope = CoroutineScope(SupervisorJob() + CoroutineExceptionHandler { _, _ -> })
scope.launch(CoroutineName("A")) {
    delay(10)
    throw RuntimeException()
}
scope.launch(CoroutineName("B")) {
    delay(100)
    Log.e("petterp", "æ­£å¸¸æ‰§è¡Œ,æˆ‘ä¸ä¼šæ”¶åˆ°å½±å“")
}
```

> å½“åç¨‹Aå¤±è´¥æ—¶ï¼Œåç¨‹Bä¾ç„¶å¯ä»¥æ­£å¸¸æ‰“å°ã€‚

å¦‚æœæˆ‘ä»¬å°†ä¸Šè¿°çš„ç¤ºä¾‹æ”¹ä¸€ä¸‹ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿå¦‚ä¸‹æ‰€ç¤ºï¼š

```kotlin
val scope = CoroutineScope(CoroutineExceptionHandler { _, _ -> })
scope.launch(SupervisorJob()) {
    launch(CoroutineName("A")) {
        delay(10)
        throw RuntimeException()
    }
    launch(CoroutineName("B")) {
        delay(100)
        Log.e("petterp", "æ­£å¸¸æ‰§è¡Œ,æˆ‘ä¸ä¼šæ”¶åˆ°å½±å“")
    }
}
```

çŒœä¸€çŒœBåç¨‹å†…éƒ¨çš„logèƒ½å¦æ­£å¸¸æ‰“å°ï¼Ÿ

> ç»“æœæ˜¯ä¸èƒ½

ä¸ºä»€ä¹ˆ? æˆ‘ä¸æ˜¯å·²ç»ä½¿ç”¨äº† SupervisorJob() å—?æˆ‘ä»¬ç”¨ä¸€å¼ å›¾æ¥çœ‹ä¸€ä¸‹ï¼š

![image-20220808231945212](https://tva1.sinaimg.cn/large/e6c9d24ely1h4zrpup1xtj20n10bpmyc.jpg)

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ `scope.launch` æ—¶ä¼ é€’äº† `SupervisorJob` ,çœ‹ç€ä¼¼ä¹æ²¡ä»€ä¹ˆé—®é¢˜ğŸ˜•ï¼Œæˆ‘ä»¬æœŸæœ›çš„æ˜¯ `SupervisorJob` ä¹Ÿä¼šä¼ é€’åˆ°å­åç¨‹ã€‚ä½†å®åˆ™ä¸ä¼šï¼Œå› ä¸ºå­åç¨‹åœ¨ `launch` æ—¶ä¼šåˆ›å»ºæ–°çš„åç¨‹ä½œç”¨åŸŸï¼Œå…¶ä¼šä½¿ç”¨é»˜è®¤æ–°çš„ `Job` æ›¿ä»£æˆ‘ä»¬ä¼ é€’ `SupervisorJob `,æ‰€ä»¥å¯¼è‡´æˆ‘ä»¬ä¼ é€’çš„ `SupervisorJob` è¢«è¦†ç›–ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³è®©å­åç¨‹ä¸å½±å“çˆ¶åç¨‹æˆ–è€…å…¶ä»–å­åç¨‹ï¼Œæ­¤æ—¶å°±å¿…é¡»å†æ˜¾ç¤ºæ·»åŠ  `SupervisorJob`ã€‚

æ­£ç¡®çš„æ‰“å¼€æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š

```kotlin
  scope.launch {
     launch(CoroutineName("A") + SupervisorJob()) {
         delay(10)
         throw RuntimeException()
     }
     launch(CoroutineName("B")) {
         delay(200)
         Log.e("petterp", "çŒœçŒœæˆ‘è¿˜èƒ½ä¸èƒ½æ‰“å°")
     }
   }
```

æ€»ç»“å¦‚ä¸‹ï¼š

> `SupervisorJob` å¯ä»¥ç”¨æ¥æ”¹å˜æˆ‘ä»¬çš„åç¨‹å¼‚å¸¸ä¼ é€’æ–¹å¼ï¼Œä»è€Œè®©å­åç¨‹è‡ªè¡Œå¤„ç†å¼‚å¸¸ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºåç¨‹å…·æœ‰ç»“æ„åŒ–çš„ç‰¹ç‚¹ï¼Œ`SupervisorJob` ä»…åªèƒ½ç”¨äºåŒä¸€çº§åˆ«çš„å­åç¨‹ã€‚å¦‚æœæˆ‘ä»¬åœ¨åˆå§‹åŒ– `scope` æ—¶æ·»åŠ äº† `SupervisorJob` ,é‚£ä¹ˆæ•´ä¸ªscopeå¯¹åº”çš„æ‰€æœ‰ **æ ¹åç¨‹** éƒ½å°†é»˜è®¤æºå¸¦ `SupervisorJob` ï¼Œå¦åˆ™å°±å¿…é¡»åœ¨ `CoroutineContext` æ˜¾ç¤ºæºå¸¦ `SupervisorJob`ã€‚

---



## å°æµ‹è¯•

### tryä¸ä½çš„å¼‚å¸¸

å¦‚ä¸‹çš„ä»£ç ï¼Œå¯ä»¥ `try` ä½å—?

```kotlin
 val scope = CoroutineScope(Job())
 try {
   	 //A
     scope.launch {
         throw NullPointerException()
     }
 } catch (e: Exception) {
     e.printStackTrace()
 }
```

> ç­”æ¡ˆæ˜¯ä¸ä¼š

ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä¸æ˜¯å·²ç»åœ¨ A å¤–é¢tryäº†å—ï¼Ÿ

> é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœ å¼‚å¸¸æ²¡æœ‰è¢«å¤„ç†ï¼Œè€Œä¸”é¡¶çº§åç¨‹ `CoroutineContext` ä¸­æ²¡æœ‰æºå¸¦ `CoroutineExceptionHandler` ,åˆ™å¼‚å¸¸ä¼šä¼ é€’ç»™é»˜è®¤çº¿ç¨‹çš„ `ExceptionHandler` ã€‚åœ¨ Android ä¸­ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®  **Thread.setDefaultUncaughtExceptionHandler** , è¿™ä¸ªå¼‚å¸¸å°†ç«‹å³è¢«æŠ›å‡ºï¼Œä»è€Œå¯¼è‡´å¼•å‘Appå´©æºƒã€‚
>

æˆ‘ä»¬åœ¨ launch æ—¶ï¼Œå› ä¸ºå¯åŠ¨äº†ä¸€ä¸ªæ–°çš„åç¨‹ä½œç”¨åŸŸï¼Œè€Œæ–°çš„ä½œç”¨åŸŸå†…éƒ¨å·²ç»æ˜¯æ–°çš„çº¿ç¨‹(å¯ä»¥ç†è§£ä¸º)ï¼Œå› ä¸ºå†…éƒ¨å‘ç”Ÿå¼‚å¸¸æ—¶å› ä¸ºæ²¡æœ‰è¢«ç›´æ¥æ•è· , å†åŠ ä¸Šå…¶Jobä¸æ˜¯ `SupervisorJob` ,æ‰€ä»¥å¼‚å¸¸å°†å‘ä¸Šå¼€å§‹ä¼ é€’,å› ä¸ºå…¶æœ¬èº«å·²ç»æ˜¯æ ¹åç¨‹,æ­¤æ—¶æ ¹åç¨‹çš„ `CoroutineContext` ä¹Ÿæ²¡æœ‰æºå¸¦ `CoroutineExceptionHandler`, ä»è€Œå¯¼è‡´äº†ç›´æ¥å¼‚å¸¸ã€‚

---



### CoroutinexxHandler ä¸ç”Ÿæ•ˆï¼Ÿ

ä¸‹åˆ—ä»£ç ä¸­ï¼Œæ·»åŠ çš„ `CoroutineExceptionHandler` ä¼šç”Ÿæ•ˆå—? 

```kotlin
val scope = CoroutineScope(Job())
scope.launch {
    val asyncA = async(SupervisorJob()+CoroutineExceptionHandler { _, _ -> }) {
        throw RuntimeException()
    }
    val asyncB = async(SupervisorJob()+CoroutineExceptionHandler { _, _ -> }) {
        throw RuntimeException()
    }
    asyncA.await()
    asyncB.await()
}
```

> ç­”æ¡ˆæ˜¯: **ä¸ä¼šç”Ÿæ•ˆ**
>
> Tips: å¦‚æœä½ ä¸æ˜¯å¾ˆç†è§£ `async` çš„ `CoroutineContext` é‡Œæ­¤æ—¶ä¸ºä»€ä¹ˆè¦åŠ  `SupervisorJob` ,è¯·çœ‹ä¸‹é¢ï¼Œä¼šå†åšè§£é‡Šã€‚

ä½ å¯èƒ½ä¼šæƒ³ï¼Œè¿™è¿˜ä¸ç®€å•å—ï¼Œä¸Šé¢ä¸æ˜¯å·²ç»æè¿‡äº†ï¼Œå¦‚æœæ ¹åç¨‹æˆ–è€…scopeä¸­æ²¡æœ‰è®¾ç½® `CoroutineExceptionHandler`ï¼Œå¼‚å¸¸ä¼šè¢«ç›´æ¥æŠ›å‡º,æ‰€ä»¥è¿™é‡Œè‚¯å®šå¼‚å¸¸äº†å•Šã€‚

å¦‚æœä½ è¿™æ ·æƒ³äº†ï¼Œæ­å–œå›ç­”æ­£ç¡®~ ğŸ‘

**é‚£è¯¥æ€ä¹ˆæ”¹ä¸€ä¸‹ä¸Šè¿°ç¤ºä¾‹å‘¢?**

`scope` åˆå§‹åŒ–æ—¶ æˆ–è€… æ ¹åç¨‹é‡Œ åŠ ä¸Š `CoroutineExceptionHandler`,æˆ–è€…ç›´æ¥ `async` é‡Œé¢ `try catch` éƒ½å¯ä»¥ã€‚é‚£è¿˜æœ‰æ²¡æœ‰å…¶ä»–æ–¹å¼å‘¢?

> æ­¤å¤„åœç•™10s æ€è€ƒ,loading.....

å¦‚æœä½ è¿˜è®°å¾—æˆ‘ä»¬æœ€å¼€å§‹è¯´è¿‡çš„å¼‚å¸¸çš„ **ä¼ æ’­å½¢å¼** ï¼Œå°±ä¼šçŸ¥é“ï¼Œå¯¹äº `async` è¿™ç§,åœ¨å…¶å¼‚å¸¸æ—¶ï¼Œå…¶ä¼šä¸»åŠ¨å‘ç”¨æˆ·æš´æ¼ï¼Œè€Œä¸æ˜¯ä¼˜å…ˆå‘ä¸Šä¼ é€’ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ç›´æ¥å¯ä»¥åœ¨ `await()` æ—¶ `try Catch` ã€‚ä»£ç å¦‚ä¸‹:

```kotlin
scope.launch {
    val asyncA = async(SupervisorJob()){}
    val asyncB = async(SupervisorJob()){}
  	
   	val resultA = kotlin.runCatching { asyncA.await() }
   	val resultB = kotlin.runCatching { asyncB.await() }
}
```

> `runCatching` æ˜¯ kotlin ä¸­å¯¹äº `tryCatch` çš„ä¸€ç§åŒ…è£…,å…¶ä¼šå°†ç»“æœä½¿ç”¨ `Result` ç±»è¿›è¡ŒåŒ…è£…,ä»è€Œè®©æˆ‘ä»¬èƒ½æ›´ç›´è§‚çš„å¤„ç†ç»“æœï¼Œä»è€Œæ›´åŠ ç¬¦åˆ kotlin çš„è¯­æ³•ä¹ æƒ¯ã€‚

---



**Tips**

ä¸ºä»€ä¹ˆä¸Šè¿° `async` é‡Œè¦æ·»åŠ  `SupervisorJob()` ï¼Œè¿™é‡Œå†åšä¸€ä¸ªè§£é‡Šã€‚

```kotlin
val scope = CoroutineScope(Job())
scope.launch {
    val asyncA = async(SupervisorJob()) { throw RuntimeException()}
    val asyncB = async xxx
}
```

å› ä¸º `async` æ—¶å†…éƒ¨ä¹Ÿæ˜¯æ–°çš„ä½œç”¨åŸŸï¼Œå¦‚æœ `async` å¯¹åº”çš„æ˜¯æ ¹åç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨ `await()` æ—¶ç›´æ¥æ•è·å¼‚å¸¸ã€‚æ€ä¹ˆç†è§£å‘¢ï¼Ÿ

å¦‚ä¸‹ç¤ºä¾‹ï¼š

```kotlin
val scope = CoroutineScope(Job())
// async ä½œä¸ºæ ¹åç¨‹
val asyncA = scope.async { throw NullPointerException() }
val asyncB = scope.async { }
scope.launch {
  	// æ­¤æ—¶å¯ä»¥ç›´æ¥tryCatch
    kotlin.runCatching {
        asyncA.await()
        asyncB.await()
    }
}


```

ä½†å¦‚æœ `async` å…¶å¯¹åº”çš„ä¸æ˜¯æ ¹åç¨‹(å³ä¸æ˜¯ **scopeç›´æ¥.async** ),åˆ™ä¼šå…ˆå°†å¼‚å¸¸ä¼ é€’ç»™çˆ¶åç¨‹ï¼Œä»è€Œå¯¼è‡´å¼‚å¸¸æ²¡æœ‰åœ¨è°ƒç”¨å¤„æš´æ¼ï¼Œæˆ‘ä»¬çš„`tryCatch` è‡ªç„¶ä¹Ÿå°±æ— æ³•æ‹¦æˆªã€‚å¦‚æœæ­¤æ—¶æˆ‘ä»¬ä¸ºå…¶å¢åŠ  `SupervisorJob()` ,åˆ™æ ‡å¿—ç€å…¶ä¸ä¼šä¸»åŠ¨ä¼ é€’å¼‚å¸¸ï¼Œè€Œæ˜¯ç”±è¯¥åç¨‹è‡ªè¡Œå¤„ç†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å¤„(`await()`) æ•è·ã€‚

---



## ç›¸å…³æ‰©å±•

### supervisorScope

å®˜æ–¹è§£é‡Šå¦‚ä¸‹ï¼š

> ä½¿ç”¨ `SupervisorJob` åˆ›å»ºä¸€ä¸ª `CoroutineScope` å¹¶ä½¿ç”¨æ­¤èŒƒå›´è°ƒç”¨æŒ‡å®šçš„æŒ‚èµ·å—ã€‚æä¾›çš„ä½œç”¨åŸŸä»å¤–éƒ¨ä½œç”¨åŸŸç»§æ‰¿å…¶`coroutineContext` ï¼Œä½†ç”¨ `SupervisorJob` è¦†ç›–ä¸Šä¸‹æ–‡çš„ `Job` ã€‚ä¸€æ—¦ç»™å®šå—åŠå…¶æ‰€æœ‰å­åç¨‹å®Œæˆï¼Œæ­¤å‡½æ•°å°±ä¼šè¿”å›ã€‚
>

é€šä¿—ç‚¹å°±æ˜¯ï¼Œæˆ‘ä»¬å¸®ä½ åˆ›å»ºäº†ä¸€ä¸ª `CoroutineScope` ,åˆå§‹åŒ–ä½œç”¨åŸŸæ—¶ï¼Œä½¿ç”¨ `SupervisorJob` æ›¿ä»£é»˜è®¤çš„Job,ç„¶åå°†å…¶çš„ä½œç”¨åŸŸæ‰©å±•è‡³å¤–éƒ¨è°ƒç”¨ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤º:

```kotlin
val scope = CoroutineScope(CoroutineExceptionHandler { _, _ -> })
scope.launch() {
    supervisorScope {
      	// launch A â
        launch(CoroutineName("A")) {
            delay(10)
            throw RuntimeException()
        }
      
				// launch B ğŸ‘
        launch(CoroutineName("B")) {
            delay(100)
            Log.e("petterp", "æ­£å¸¸æ‰§è¡Œ,æˆ‘ä¸ä¼šæ”¶åˆ°å½±å“")
        }
    }
}
```

å½“ `supervisorScope` é‡Œçš„æ‰€æœ‰å­åç¨‹æ‰§è¡Œå®Œæˆæ—¶ï¼Œå…¶å°±ä¼šæ­£å¸¸é€€å‡ºä½œç”¨åŸŸã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`supervisorScope` å†…éƒ¨çš„ `Job` ä¸º `SupervisorJob` ï¼Œæ‰€ä»¥å½“ä½œç”¨åŸŸä¸­å­åç¨‹å¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸ä¸ä¼šä¸»åŠ¨å±‚å±‚å‘ä¸Šä¼ é€’ï¼Œè€Œæ˜¯ç”±å­åç¨‹è‡ªè¡Œå¤„ç†ï¼Œæ‰€ä»¥æ„å‘³ç€æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºå­åç¨‹å¢åŠ  `CoroutineExceptionHandler` ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š

![image-20220806113318944](https://tva1.sinaimg.cn/large/e6c9d24ely1h4ww27bv8lj20pk0ewwg4.jpg)

å½“å­åç¨‹å¼‚å¸¸æ—¶,å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº† `supervisorScope` ,æ‰€ä»¥å¼‚å¸¸æ­¤æ—¶ä¸ä¼šä¸»åŠ¨ä¼ é€’ç»™å¤–éƒ¨ï¼Œè€Œæ˜¯ç”±å­ç±»è‡ªè¡Œå¤„ç†ã€‚

å½“æˆ‘ä»¬åœ¨å†…éƒ¨ `launch` å­åç¨‹æ—¶ï¼Œ**å…¶å®ä¹Ÿå°±æ˜¯ç±»ä¼¼ scope.launch ,æ‰€ä»¥æ­¤æ—¶å­åç¨‹Aç›¸ä¹Ÿå°±æ˜¯æ ¹åç¨‹**ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ `CoroutineExceptionHandler` ä¹Ÿå¯ä»¥æ­£å¸¸æ‹¦æˆªå¼‚å¸¸ã€‚ä½†å¦‚æœæˆ‘ä»¬å­åç¨‹ä¸å¢åŠ  `CoroutineExceptionHandler` ,åˆ™æ­¤æ—¶å¼‚å¸¸ä¼šè¢«`supervisorScope` æŠ›å‡º,ç„¶åè¢«å¤–éƒ¨çš„ `CoroutineExceptionHandler` æ‹¦æˆª(ä¹Ÿå°±æ˜¯åˆå§‹åŒ–scopeä½œç”¨åŸŸæ—¶ä½¿ç”¨çš„ `ExceptionHandler`)ã€‚

ç›¸åº”çš„ï¼Œä¸ `supervisorScope` ç›¸ä¼¼çš„,è¿˜æœ‰ä¸€ä¸ª `coroutineScope` ,ä¸‹é¢æˆ‘ä»¬ä¹Ÿæ¥è¯´ä¸€ä¸‹è¿™ä¸ªã€‚

---



### coroutineScope

å…¶ä¸»è¦ç”¨äºå¹¶è¡Œåˆ†è§£åç¨‹å­ä»»åŠ¡æ—¶è€Œä½¿ç”¨ï¼Œå½“å…¶èŒƒå›´å†…ä»»ä½•å­åç¨‹å¤±è´¥æ—¶ï¼Œå…¶æ‰€æœ‰çš„å­åç¨‹ä¹Ÿéƒ½å°†è¢«å–æ¶ˆï¼Œä¸€æ—¦å†…éƒ¨æ‰€æœ‰çš„å­åç¨‹å®Œæˆï¼Œå…¶ä¹Ÿä¼šæ­£å¸¸è¿”å›ã€‚

å¦‚ä¸‹ç¤ºä¾‹ï¼š

![image-20220811141954501](https://tva1.sinaimg.cn/large/e6c9d24ely1h52sz4824pj20og0e6dha.jpg)

å½“å­åç¨‹A å¼‚å¸¸æœªè¢«æ•è·æ—¶ï¼Œæ­¤æ—¶ å­åç¨‹B å’Œæ•´ä¸ª åç¨‹ä½œç”¨åŸŸ éƒ½å°†è¢«å¼‚å¸¸å–æ¶ˆï¼Œæ­¤æ—¶å¼‚å¸¸å°†ä¼ é€’åˆ°é¡¶çº§ `CoroutineExceptionHandler`



## åœºæ™¯æ¨è

ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œæ‰€æœ‰å¼‚å¸¸éƒ½å¯ä»¥ç”¨ `tryCatch` å»å¤„ç†ï¼Œåªè¦æˆ‘ä»¬çš„å¤„ç†ä½ç½®å¾—å½“ã€‚ä½†è¿™å¹¶ä¸æ˜¯æ‰€æœ‰æ–¹å¼çš„æœ€ä¼˜è§£ï¼Œç‰¹åˆ«æ˜¯å¦‚æœä½ æƒ³æ›´ä¼˜é›…çš„å¤„ç†å¼‚å¸¸æ—¶ï¼Œæ­¤æ—¶å°±å¯ä»¥è€ƒè™‘ `CoroutineExceptionHandler` ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡å®é™…éœ€æ±‚æ¥ä¸¾ä¾‹ï¼Œä»è€Œä½“ä¼šå¼‚å¸¸å¤„ç†çš„çš„ä¸€äº›å®è·µã€‚

**ä»€ä¹ˆæ—¶å€™è¯¥ç”¨ SupervisorJob ï¼Œä»€ä¹ˆæ—¶å€™è¯¥ç”¨ Job?**

å¼•ç”¨å®˜æ–¹çš„ä¸€å¥è¯å°±æ˜¯ï¼šæƒ³è¦é¿å…å–æ¶ˆæ“ä½œåœ¨å¼‚å¸¸å‘ç”Ÿæ—¶è¢«ä¼ æ’­ï¼Œè®°å¾—ä½¿ç”¨ `SupervisorJob` ï¼›åä¹‹åˆ™ä½¿ç”¨ `Job`ã€‚

**å¯¹äºä¸€ä¸ªæ™®é€šçš„åç¨‹ï¼Œå¦‚ä½•å¤„ç†æˆ‘çš„å¼‚å¸¸ï¼Ÿ**

å¯¹äºä¸€ä¸ªæ™®é€šçš„åç¨‹ï¼Œä½ å¯ä»¥åœ¨å…¶åç¨‹ä½œç”¨åŸŸå†…ä½¿ç”¨ `tryCatch(runCatching)` ,å¦‚æœå…¶æ˜¯æ ¹åç¨‹ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ `CoroutineExceptionHandler` ä½œä¸ºæœ€åçš„æ‹¦æˆªæ‰‹æ®µ ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```kotlin
val scope = CoroutineScope(Job())
scope.launch {
    runCatching { }
}

scope.launch(CoroutineExceptionHandler { _, throwable -> }) {  
}
```

---

**åœ¨æŸä¸ªå­åç¨‹ä¸­,æƒ³ä½¿ç”¨ SupervisorJob çš„ç‰¹æ€§å»ä½œä¸ºæŸä¸ªä½œç”¨åŸŸå»æ‰§è¡Œï¼Ÿ**

```kotlin
val scope = CoroutineScope(Job())
scope.launch(CoroutineExceptionHandler { _, _ -> }) {
    supervisorScope {
        launch(CoroutineName("A")) {
            throw NullPointerException()
        }
        launch(CoroutineName("B")) {
            delay(1000)
            Log.e("petterp", "ä¾ç„¶ä¼šæ­£å¸¸æ‰§è¡Œ")
        }
    }
}
```

---

**SupervisorJob+tryCatch**

æˆ‘ä»¬æœ‰ä¸¤ä¸ªæ¥å£ A,B éœ€è¦åŒæ—¶è¯·æ±‚ï¼Œå½“æ¥å£Aå¼‚å¸¸æ—¶ï¼Œéœ€è¦ä¸å½±å“Bæ¥å£çš„æ­£å¸¸å±•ç¤ºï¼Œå½“æ¥å£Bå¼‚å¸¸æ—¶ï¼Œæ­¤æ—¶ç•Œé¢å±•ç¤ºå¼‚å¸¸ä¿¡æ¯ã€‚ä¼ªä»£ç å¦‚ä¸‹ï¼š

```kotlin
val scope = CoroutineScope(Job())
scope.launch {
    val jobA = async(SupervisorJob()) {
        throw NullPointerException()
    }
    val jobB = async(SupervisorJob()) {
        delay(100)
        1
    }
    val resultA = kotlin.runCatching { jobA.await() }
    val resultB = kotlin.runCatching { jobB.await() }
}
```

---

**CoroutineExceptionHandler+SupervisorJob**

å¦‚æœä½ æœ‰ä¸€ä¸ªé¡¶çº§åç¨‹ï¼Œå¹¶ä¸”éœ€è¦è‡ªåŠ¨æ•è·æ‰€æœ‰çš„å¼‚å¸¸ï¼Œåˆ™æ­¤æ—¶å¯ä»¥é€‰ç”¨ä¸Šè¿°æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```kotlin
val exceptionHandler = CoroutineExceptionHandler { _, throwable ->
    Log.e("petterp", "è‡ªåŠ¨æ•è·æ‰€æœ‰å¼‚å¸¸")
}
val ktxScope = CoroutineScope(SupervisorJob() + exceptionHandler)
```

## å‚è€ƒ

- [åç¨‹ä¸­çš„å–æ¶ˆå’Œå¼‚å¸¸ | å¼‚å¸¸å¤„ç†è¯¦è§£](https://blog.csdn.net/googledevs/article/details/107437548)
- [ä»€ä¹ˆæ˜¯ ç»“æ„åŒ–å¹¶å‘ ï¼Ÿ](https://www.jianshu.com/p/3dc8ba43c28b)
- [ã€ŒKotlinç¯‡ã€å¤šæ–¹ä½å¤„ç†åç¨‹çš„å¼‚å¸¸](https://juejin.cn/post/6973616939151130654#comment)

## å…³äºæˆ‘

æˆ‘æ˜¯Petterp,ä¸€ä¸ªä¸‰æµå¼€å‘ï¼Œå¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµè¯„è®ºï¼Œä½ çš„æ”¯æŒæ˜¯æˆ‘æŒç»­åˆ›ä½œçš„æœ€å¤§é¼“åŠ±ï¼
