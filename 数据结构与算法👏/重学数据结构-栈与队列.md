

<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxseTFnaTVkY252Nnh6ajMxNzkwdTBndzkuanBn?x-oss-process=image/format,png" alt="image-20200827144816269" style="zoom: 50%;" /> 


## æ ˆ(Stack)

- **Last In First Out(LIFO)** åè¿›å…ˆå‡º
- æ ˆä¹Ÿæ˜¯ä¸€ç§çº¿æ€§æ•°æ®ç»“æ„

![image-20200822100456400](https://imgconvert.csdnimg.cn/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxseTFnaHpkMjhqeXVjajMwODYwYjkwc3AuanBn?x-oss-process=image/format,png)
<br/>

### ä»£ç å®ç°æ ˆ

**è€ƒè™‘åˆ°éœ€è¦æ‰©å®¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ArrayListæœ€ä¸ºåº•å±‚çš„åŠ¨æ€æ•°ç»„æ”¯æŒã€‚**

```kotlin
interface Stack<E> {
  	//è·å–æ ˆçš„å¤§å°
    fun getSize(): Int
  	//æ ˆæ˜¯å¦ä¸ºnull
    fun isEmpty(): Boolean
  	//å‡ºæ ˆ
    fun pop(): E
  	//è·å–æ ˆå°¾å…ƒç´ 
    fun peek(): E
}

class ArrayStack<E>(private val capacity: Int = 10) : Stack<E> {
    
    private val array = ArrayList<E>(capacity)

    override fun getSize(): Int {
        return array.size
    }

    override fun isEmpty(): Boolean {
        return array.isEmpty()
    }
		
    override fun pop(): E {
        return array.removeLast()
    }

    override fun peek(): E {
        return array[getSize() - 1]
    }

    fun getCapacity(): Int {
        return capacity
    }

    fun push(e: E) {
        array.add(e)
    }

    override fun toString(): String {
        val res = StringBuilder("Stack:")
        res.append("Stackï¼š").append("[")
        if (array.isNotEmpty()) {
            array.forEach {
                res.append("$it,")
            }
            res.deleteCharAt(res.length - 1)
        }
        res.append("] top ")
        return res.toString()
    }
}
```




<br/>


### æ ˆçš„åº”ç”¨

- å¸¸è§çš„ **Undo** æ“ä½œï¼Œå³æ’¤é”€æ“ä½œ(ctrl+z,command+z ç±»ä¼¼)

- ç¨‹åºè°ƒç”¨æ‰€ä½¿ç”¨çš„ç³»ç»Ÿæ ˆ

  æ¯”å¦‚æˆ‘ä»¬åœ¨å¼€å‘ä¸­å¸¸è§çš„æ–¹æ³•æ ˆï¼Œå³åœ¨ Aæ–¹æ³•ä¸­å»è°ƒç”¨Bæ–¹æ³•ï¼ŒBæ–¹æ³•å†å»è°ƒç”¨Cæ–¹æ³•ã€‚ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç ,éƒ½æ˜¯é€šè¿‡ä¸Šæ¬¡çš„ä¸­æ–­ä½ç½®æ‰¾åˆ°æ¥ä¸‹æ¥åº”è¯¥æ‰§è¡Œçš„ä½ç½®ç»§ç»­æ‰§è¡Œã€‚

  > **éœ€è¦æ³¨æ„çš„æ˜¯æ¯ä¸ªçº¿ç¨‹éƒ½åŒ…å«ä¸€ä¸ªæ ˆåŒºï¼Œå®é™…å¼€å‘å¾€å¾€æ¶‰åŠå¤šä¸ªçº¿ç¨‹ï¼Œè€Œæˆ‘ä»¬ä¸‹è¿°ä»£ç åªåŒ…å«äº†ä¸€ä¸ªçº¿ç¨‹ç¤ºä¾‹ï¼Œå³ä¸»çº¿ç¨‹ã€‚**

  ```kotlin
  class StackTest {
      fun a() {
          println("Stack-fun-aè¿›å…¥")
          b()
          println("Stack-fun-bç§»é™¤")
      }
  
      private fun b() {
          println("Stack-fun-bè¿›å…¥")
          c()
          println("Stack-fun-cç§»é™¤")
      }
  
      private fun c() {
          println("Stack-fun-cè¿›å…¥")
      }
  }
  
  fun main() {
      StackTest().a()
      println("Stack-fun-aç§»é™¤")
  }
  ```

  ```verilog
  Stack-fun-aè¿›å…¥
  Stack-fun-bè¿›å…¥
  Stack-fun-cè¿›å…¥
  Stack-fun-cç§»é™¤
  Stack-fun-bç§»é™¤
  Stack-fun-aç§»é™¤
  ```

  <br/>


## é˜Ÿåˆ—(Queue)

![image-20200825142900859](https://imgconvert.csdnimg.cn/aHR0cHM6Ly90dmExLnNpbmFpbWcuY24vbGFyZ2UvMDA3UzhaSWxseTFnaTMxanZuZG8wajMwbXYwNzFxMzEuanBn?x-oss-process=image/format,png)

- é˜Ÿåˆ—ä¹Ÿæ˜¯ä¸€ç§çº¿æ€§ç»“æ„
- ç›¸æ¯”æ•°ç»„ï¼Œé˜Ÿåˆ—å¯¹åº”çš„æ“ä½œæ˜¯æ•°ç»„çš„å­é›†
- åªèƒ½ä»ä¸€ç«¯(é˜Ÿå°¾)æ·»åŠ å…ƒç´ ï¼Œä»å¦ä¸€ç«¯(é˜Ÿé¦–å–å‡ºå…ƒç´ )
- **é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„**ã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºå…ˆåˆ°å…ˆå¾—ï¼Œç±»ä¼¼ä¸ºæ’é˜ŸåŠç†æŸä¸ªä¸šåŠ¡
- First In First Out (FIFO) å…ˆè¿›å…ˆå‡º

<br/>


### ä»£ç å®ç°é˜Ÿåˆ—(æ•°ç»„é˜Ÿåˆ—)

```kotlin
interface Queue<E> {
    fun enqueue(e: E)   //å¤æ‚åº¦ O(1)
 		
  	/** ç§»é™¤é˜Ÿé¦–å…ƒç´  */
    fun dequeue(): E   //å¤æ‚åº¦ O(n)
		/** è·å–é˜Ÿé¦–å…ƒç´  */
    fun getFront(): E   //å¤æ‚åº¦ O(1)
		/** è·å–é˜Ÿåˆ—å¤§å° */
    fun getSize(): Int  //å¤æ‚åº¦ O(1)
		/** åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºnull */
    fun isEmpty(): Boolean  //å¤æ‚åº¦ O(1)
}

class ArrayQueue<E>(private val initialCapacity) : Queue<E> {

    private var array = ArrayList<E>(initialCapacity)

    override fun enqueue(e: E) {
        array.add(e)
    }

    
    override fun dequeue(): E {
        return array.removeFirst()
    }

    
    override fun getFront(): E {
        return array.first()
    }

    override fun getSize(): Int {
        return array.size
    }

    override fun isEmpty(): Boolean {
        return array.isEmpty()
    }

    override fun toString(): String {
        val res = StringBuilder()
        res.append("Queueï¼š")
        res.append("front [")
        if (array.isNotEmpty()) {
            array.forEach {
                res.append(it)
                res.append(",")
            }
            res.deleteCharAt(res.length - 1);
        }
        res.append("] tail")
        return res.toString()
    }

    fun getCapacity(): Int {
        return initialCapacity
    }
}
```

<br/>
<br/>


## å¾ªç¯é˜Ÿåˆ—

è™½ç„¶æˆ‘ä»¬ä¸Šé¢å®ç°äº†æ™®é€šé˜Ÿåˆ—ï¼Œä½†æ˜¯æ™®é€šçš„é˜Ÿåˆ—ä¹Ÿæœ‰å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œæ¯”å¦‚å½“æˆ‘ä»¬ç§»é™¤é˜Ÿé¦–å…ƒç´ æ—¶ï¼Œç®—æ³•å¤æ‚åº¦ä¸ºO(n),è¿™æ˜¯æˆ‘ä»¬ä¸èƒ½æ¥å—çš„ã€‚

è¦æ”¹æ‰ä¸Šé¢çš„é—®é¢˜ï¼Œé¦–å…ˆæ€è€ƒğŸ¤”ï¼Œæˆ‘ä»¬éœ€è¦ä»€ä¹ˆï¼Ÿ

**å½“åˆ é™¤é˜Ÿé¦–å…ƒç´ æ—¶ï¼Œå¦‚æœç›´æ¥ç§»åŠ¨æ•´ä¸ªé˜Ÿåˆ—ï¼Œæ•ˆç‡åŠ¿å¿…æœ€ä½ï¼Œè¿™ä¸ªæ—¶å€™å¦‚ä½•æ‰èƒ½ä¸ç§»åŠ¨é˜Ÿåˆ—ä¸­å…ƒç´ ä½ç½®ï¼Œè¿˜èƒ½ä¾¿äºä¸‹æ¬¡åˆ é™¤é˜Ÿé¦–æ—¶ï¼Œèƒ½å‡†ç¡®æ‰¾åˆ°å‘¢ï¼Ÿ**

**æˆ‘ä»¬å¯ä»¥å¢åŠ  ä¸¤ä¸ªå˜é‡ï¼Œé˜Ÿé¦–å’Œé˜Ÿå°¾çš„ä¸‹æ ‡ä½ç½®ï¼Œè¿™æ ·æˆ‘ä»¬åªéœ€è¦æ¯æ¬¡åˆ é™¤é˜Ÿé¦–æ—¶æ”¹å˜ é˜Ÿé¦–å½“å‰ä¸‹æ ‡ï¼Œå…¥é˜Ÿæ—¶ï¼Œæ”¹å˜é˜Ÿå°¾ä¸‹æ ‡ã€‚ä½†æ˜¯ç›¸åº”çš„ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦è€ƒè™‘åˆ°æ•°ç»„çš„æ‰©å®¹ä¸ç›¸åº”çš„ç¼©å®¹,æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨å¾ªç¯é˜Ÿåˆ—æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚**



### è¾¹ç•Œè€ƒè™‘

- é˜Ÿé¦–å’Œé˜Ÿå°¾ä¸‹æ ‡ç›¸ç­‰æ—¶åˆ™æ„å‘³ç€é˜Ÿåˆ—ä¸ºnullï¼Œå³é»˜è®¤çŠ¶æ€ï¼›
- éœ€è¦è€ƒè™‘å½“å‰é˜Ÿåˆ—çš„å…ƒç´ ä¸ªæ•°ï¼›
- æ‰©å®¹ä¸ç¼©å®¹çš„è€ƒè™‘ï¼Œå½“é˜Ÿå°¾ä½ç½®ä¸é˜Ÿé¦–ç›¸åŒæ—¶ï¼Œä¸»åŠ¨æ‰©å®¹ï¼Œå½“é˜Ÿåˆ—å…ƒç´ å°ä¸é»˜è®¤å®¹ç§¯æ—¶ï¼Œè€ƒè™‘ç¼©å®¹å¤„ç†ã€‚

<br/>


### ä»£ç å®ç°å¾ªç¯é˜Ÿåˆ—

```kotlin
class LoopQueue<E : Any>(private val capacity: Int = 10) : Queue<E?> {

    var data = arrayOfNulls<Any>(capacity + 1) as Array<E?>
    //é˜Ÿé¦–ä¸‹æ ‡
    private var front = 0
    //é˜Ÿå°¾ä¸‹æ ‡
    private var tail = 0
    //å½“å‰æ•°æ®é•¿åº¦
    private var size = 0
    //å®é™…å®¹é‡ä½ç½®
    private var arraySize = data.size

    override fun enqueue(e: E?) {
        //å¤§äºæ•°ç»„é•¿åº¦ï¼Œæ‰©å®¹
        if ((tail + 1) % arraySize == front) {
            resize(capacity * 2)
        }
        arraySize = data.size
        //å…¥é˜Ÿ
        data[tail] = e
        //ç¡®å®šé˜Ÿå°¾ä½ç½®
        tail = (tail + 1) % arraySize
        //å¢åŠ æ•°æ®é•¿åº¦
        ++size
    }

    private fun resize(newCapacity: Int) {
        //æ‰©å®¹å¤§å°ä¸ºä¼ å…¥å®¹é‡+1ï¼Œå› ä¸ºæˆ‘ä»¬ä¸€å®šä¼šæµªè´¹ä¸€ä¸ªç©ºé—´
        val newData = arrayOfNulls<Any>(newCapacity + 1) as Array<E?>
        //å…ˆç¡®å®šå½“å‰å®¹é‡å¤§å°
        arraySize = data.size
        //éå†æ—§æ•°æ®æºï¼Œå­˜å…¥æ–°æ•°ç»„
        
        // it+frontåŸå› å¾ˆç®€å•ï¼Œä» åŸé˜Ÿé¦– ä½ç½®å¼€å§‹éå†ç›¸åŠ 
        (0..size).forEach {
            newData[it] = data[(it + front) % arraySize]
        }
        data = newData
        //æ–°é˜Ÿé¦–ä½ç½®ä¸º0
        front = 0
        //æ–°é˜Ÿå°¾ä½ç½®ä¸ºåŸæ•°ç»„çš„é•¿åº¦
        tail = size
    }

    override fun dequeue(): E? {
      	//å®¹é”™åˆ¤æ–­
        if (isEmpty()) throw IllegalArgumentException("é˜Ÿåˆ—ä¸ºnull")
      	//æ‹¿åˆ°é˜Ÿé¦–ä½ç½®
        val ret = data[front]
        data[front] = null
      	//ç§»åŠ¨é˜Ÿé¦–ä½ç½®
        front = (front + 1) % arraySize
        --size
        //ç¼©å®¹ 
        if (size == capacity / 4 && capacity / 2 != 0) resize(capacity / 2)
        return ret
    }


    override fun getFront(): E? {
        if (isEmpty()) throw IllegalArgumentException("é˜Ÿåˆ—ä¸ºnull")
        return data[front]
    }

    override fun getSize(): Int {
        return size
    }

    override fun isEmpty(): Boolean {
        return front == tail
    }

    override fun toString(): String {
        val res = StringBuilder().append("Queueï¼š").append("front [")
        if (!isEmpty()) {
            //æ•°æ®æ‰“å°é™¤é‡
            data.filterNotNull().forEach {
                res.append(it).append(",")
            }
            res.deleteCharAt(res.length - 1);
        }
        res.append("] tail")
        return res.toString()
    }
}
```


<br/>



## å¾ªç¯é˜Ÿåˆ—å’Œæ•°ç»„é˜Ÿåˆ—çš„æ¯”è¾ƒ

ç›¸åŒæ•°æ®ä¸‹ï¼Œå¦‚æœæœ‰ç§»é™¤å…ƒç´ çš„æƒ…å†µï¼Œå¾ªç¯é˜Ÿåˆ—çš„æ•ˆç‡æ˜¾è‘—å¤§äºæ•°ç»„é˜Ÿåˆ—ï¼Œå› ä¸ºç›¸åº”çš„ï¼Œæ•°ç»„é˜Ÿåˆ—ç§»é™¤å…ƒç´ æ—¶ï¼Œéœ€è¦ç§»åŠ¨æ•´ä¸ªé˜Ÿåˆ—å…ƒç´ ï¼Œè€Œ å¾ªç¯é˜Ÿåˆ—åªéœ€è¦æ›´æ–°é˜Ÿé¦–å…ƒç´ ä½ç½®ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿéœ€è¦è€ƒè™‘**ç¼©å®¹æƒ…å†µ**ï¼Œä¸è¿‡è¿™ç§æƒ…å†µç›¸æ¯”æ•°ç»„é˜Ÿåˆ—ï¼Œæ•ˆç‡ä¹Ÿæ˜¯æå‡å·¨å¤§ã€‚å³ **O(1)||å¹³æ‘Š----O(n)**

<br/>

## æ ˆä¸é˜Ÿåˆ—ç›¸åŒç‚¹

- éƒ½æ˜¯çº¿æ€§æ•°æ®ç»“æ„
- åº•å±‚éƒ½ä¾é æ•°ç»„ï¼Œä¾é  resize(æ‰©å®¹) è§£å†³å›ºå®šå®¹é‡é—®é¢˜



<br/>

å‚è€ƒè§†é¢‘ï¼š[æ…•è¯¾ç½‘liuyubobobo](https://www.imooc.com/t/108955)

<br/>
<br/>




> æˆ‘æ˜¯ *Petterp* ,å¦‚æœä½ è§‰å¾—æˆ‘çš„æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµğŸ‘    ï¼Œå¦‚æœæœ‰ä»»ä½•æƒ³æ³•å’Œé—®é¢˜ï¼Œéšæ—¶æ¬¢è¿è¯„è®ºåŒºä¸€èµ·è®¨è®ºã€‚ğŸ‘¨â€ğŸ’»â€
